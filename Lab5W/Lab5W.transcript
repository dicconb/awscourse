**********************
Windows PowerShell transcript start
Start time: 20150708084708
Username: WIN-CBBA9RMRSC5\Administrator
RunAs User: WIN-CBBA9RMRSC5\Administrator
Machine: WIN-CBBA9RMRSC5 (Microsoft Windows NT 6.2.9200.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell_ise.exe
Process ID: 736
**********************
Transcript started, output file is C:\Users\Administrator\gitrepos\awscourse\Lab5W\Lab5W.transcript

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem"
{
    "Reservations": [
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-056138e3",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.170",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-48df0ae5",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-13BLKI0PO9M2A",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:54:3d:7e:cd:e9",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-540e2c0c",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.170"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-199e8e5b",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.170"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-cda2c5d2",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "Instance5",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-5f633ab9",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.225",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-fcdf0a51",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1MGAK17BLKO4U",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:8d:cd:26:f3:2b",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-5f0e2c07",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.225"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-009e8e42",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.225"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-f7a2c5e8",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Instance1",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-1a6039fc",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.171",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-d0df0a7d",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSecurityGr
oup-1QT6XT8BIGW4K",
                            "GroupId": "sg-40060b25"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1ZWJZ34Z52Z6",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:4a:8e:12:d4:ff",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-5d0e2c05",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.171"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-769e8e34",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSe
curityGroup-1QT6XT8BIGW4K",
                                    "GroupId": "sg-40060b25"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.171"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-dda2c5c2",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "Instance2",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-92603974",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.212",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-e3de0b4e",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1MCKTDVXKKRW0",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:d0:8f:55:8f:71",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-500e2c08",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.212"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-ba9d8df8",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.212"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-8fa2c590",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Instance4",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-d9633a3f",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:48.000Z",
                    "PrivateIpAddress": "10.5.1.153",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-27de0b8a",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-ZZIR6Q7RGIX0",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:c0:b9:d1:4b:97",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-570e2c0f",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.153"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-489e8e0a",
                                "AttachTime": "2015-07-08T07:20:48.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.153"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-2ea1c631",
                                "AttachTime": "2015-07-08T07:20:51.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "Instance6",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "production",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-93603975",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.183",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-e0de0b4d",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-OCABSDFF167C",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:84:f9:6f:d2:b5",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-510e2c09",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.183"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-bb9d8df9",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.183"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-bfa2c5a0",
                                "AttachTime": "2015-07-08T07:20:51.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "Instance8",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "production",
                            "Key": "Environment"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-40633aa6",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:50.000Z",
                    "PrivateIpAddress": "10.5.1.139",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-fedf0a53",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-12GTEST9J45SN",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:8f:89:71:2f:4d",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-490e2c11",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.139"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-179e8e55",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.139"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-f6a2c5e9",
                                "AttachTime": "2015-07-08T07:20:53.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "production",
                            "Key": "Environment"
                        },
                        {
                            "Value": "Instance7",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-5e633ab8",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.14",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-ffdf0a52",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1SVBXTD3P77ZQ",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:65:31:05:b2:1f",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-550e2c0d",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.14"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-019e8e43",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.14"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-16a1c609",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "Instance3",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        }
    ]
}

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" --query 'Reservations[*].Instances[*].InstanceId'
[
    [
        "i-48df0ae5"
    ],
    [
        "i-fcdf0a51"
    ],
    [
        "i-d0df0a7d"
    ],
    [
        "i-e3de0b4e"
    ],
    [
        "i-27de0b8a"
    ],
    [
        "i-e0de0b4d"
    ],
    [
        "i-fedf0a53"
    ],
    [
        "i-ffdf0a52"
    ]
]

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone}'
[
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-48df0ae5"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-d0df0a7d"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-e3de0b4e"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-27de0b8a"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-e0de0b4d"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-fedf0a53"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-ffdf0a52"
        }
    ]
]

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone,Project:Tags[?Key==`Project`] | [0].Value}'
[
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-48df0ae5"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-d0df0a7d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-e3de0b4e"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-27de0b8a"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-e0de0b4d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-fedf0a53"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "AZ": "eu-west-1a",
            "ID": "i-ffdf0a52"
        }
    ]
]

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone,Project:Tags[?Key==`Project`] | [0].Value,Environment:Tags[?Key==`Environment`] | [0].Value,Version:Tags[?Key==`Version`] | [0].Value}'
[
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-48df0ae5"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-d0df0a7d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-e3de0b4e"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-27de0b8a"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-e0de0b4d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-fedf0a53"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-ffdf0a52"
        }
    ]
]

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" "Name=tag:Environment,Values=development" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone,Project:Tags[?Key==`Project`] | [0].Value,Environment:Tags[?Key==`Environment`] | [0].Value,Version:Tags[?Key==`Version`] | [0].Value}'
[
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-d0df0a7d"
        }
    ]
]

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2373                              4 {System.Management.Automati...



PS C:\Windows\system32> get-content "C:\temp\change-resource-tags.ps1"
$instances = aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" "Name=tag:Environment,Values=developmen
t" --query 'Reservations[*].Instances[*].InstanceId' --output text

$instances = $instances.split("\n")

aws ec2 create-tags --resources $instances --tags 'Key=Version,Value=1.1'

PS C:\Windows\system32> C:\temp\change-resource-tags.ps1

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Project,Values=ERPSystem" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone,Project:Tags[?Key==`Project`] | [0].Value,Environment:Tags[?Key==`Environment`] | [0].Value,Version:Tags[?Key==`Version`] | [0].Value}'
[
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-48df0ae5"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.1",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "development",
            "AZ": "eu-west-1a",
            "Version": "1.1",
            "ID": "i-d0df0a7d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-e3de0b4e"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-27de0b8a"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-e0de0b4d"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "production",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-fedf0a53"
        }
    ],
    [
        {
            "Project": "ERPSystem",
            "Environment": "staging",
            "AZ": "eu-west-1a",
            "Version": "1.0",
            "ID": "i-ffdf0a52"
        }
    ]
]

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3191                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3191                              9 {System.Management.Automati...



PS C:\Windows\system32> Get-Content "c:\temp\stopinator.ps1"
# stopinator.ps1 - stop or start all instances by tag value
#
# USAGE:
# stopinator.ps1 [-tags ["name=value;name2=value2"]] [-exclude]
#
# -tags: A list of semicolon-separated name/value pairs, with pair name and value delimited by an equals sign. The script co
nverts
# this simplified tag format into the format expected by the Get-Ec2Instance Powershell cmdlet for tag Filters.
#
# -exclude: Switch parameter. If present, excludes the current instance from being stopped.
#
# -start: Switch parameter. Causes instances to be started rather than stopped. Used for bringing up powered-down instances
# when you are ready to use them again. If not included, default behavior is to stop instances.

param (
[string] $tags = $null,
[switch] $exclude,
[switch] $start
)

import-module "C:\Program Files (x86)\AWS Tools\PowerShell\AWSPowerShell\AWSPowerShell.psd1"

# If $exclude is set, obtain the current instance ID from metadata.
$currInstId = ""
if ($exclude) {
	try {
		$currInstId = (new-object net.webclient).DownloadString('http://169.254.169.254/latest/meta-data/instance-id')
		write-host "Excluding current instance ("$currInstId") from stopinator operations..." "`n"
		} catch [Exception] {
			write-host "-exclude parameter was used, but current computer has no running meta-data service. -exclude is only supporte
d on Amazon EC2 instances."
		}
}

# Iterate through each region.
foreach ($region in Get-AwsRegion) {
	Set-DefaultAWSRegion($region.Region)
	write-host "Region is" $region.Region

	# Build tag filter from -tag name=value pairs.
	$tagsColl = [System.Collections.ArrayList]@()
	if (![string]::IsNullOrEmpty($tags)) {
		foreach ($pair in $tags.Split(";")) {
			$nameVal = $pair.Split("=")
			$filter = New-Object Amazon.EC2.Model.Filter -Property @{Name = "tag:" + $nameVal[0]; Values = $nameVal[1]}
			[void]$tagsColl.Add($filter)
		}
	}

	$instanceIds = [System.Collections.ArrayList]@()

	# Find resources with the specified tag.
	foreach ($reservation in (Get-Ec2Instance -Filter $tagsColl)) {
		foreach ($instance in $reservation.Instances) {
			# Don't kill us! We're busy here!!
			if ($start -ne $true -and $exclude -and $instance.InstanceId -eq $currInstId) {
				write-host "`tExcluding instance" $instance.InstanceID
			} else {
			  # Behave different depending on whether we're starting or stopping instances.
				if ($start -eq $false) {
					if ($instance.State.Code -eq 16) {
						write-host "`tFound instance" $instance.InstanceId
						[void]$instanceIds.Add($instance.InstanceId)
					} else {
						write-host "`tInstance" $instance.InstanceId " - already stopped"
					}
				} else {
					if ($instance.State.Code -eq 80) {
						write-host "`tFound instance" $instance.InstanceId
						[void]$instanceIds.Add($instance.InstanceId)
					} else {
						write-host "`tInstance" $instance.InstanceId " - not a stopped instance"
					}
				}
			}
		}
	}

	# Stop or start all identified instances.
	if ($start -eq $true) {
		if ($instanceIds.Count -gt 0) {
			write-host "Starting all identified instances..."
			$stopResult = Start-Ec2Instance $instanceIds
		} else {
			write-host "`tNo instances to start in region"
		}
	} else {
		if ($instanceIds.Count -gt 0) {
			write-host "Stopping all identified instances..."
			$stopResult = Stop-Ec2Instance $instanceIds
		} else {
			write-host "`tNo instances to stop in region"
		}
	}
}

PS C:\Windows\system32> c:\temp\stopinator.ps1 -tags "Project=ERPSystem;Environment=development"

PS C:\Windows\system32> c:\temp\stopinator.ps1 -tags "Project=ERPSystem;Environment=development" -start

PS C:\Windows\system32> aws ec2 describe-instances
{
    "Reservations": [
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-d8633a3e",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.168",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-71dc09dc",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-168.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-9FA3ZT4JFDZU",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:52:a3:52:02:fb",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-530e2c0b",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-168.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.168"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-168.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-a69d8de4",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.168"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-b2a2c5ad",
                                "AttachTime": "2015-07-08T07:20:51.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Experiment1",
                            "Key": "Project"
                        },
                        {
                            "Value": "Finance",
                            "Key": "Department"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "Instance10",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "EOM ETL",
                            "Key": "Application"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-056138e3",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.170",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-48df0ae5",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-13BLKI0PO9M2A",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:54:3d:7e:cd:e9",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-540e2c0c",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.170"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-170.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-199e8e5b",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.170"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-cda2c5d2",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "Instance5",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-5f633ab9",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T08:58:26.000Z",
                    "PrivateIpAddress": "10.5.1.225",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-fcdf0a51",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1MGAK17BLKO4U",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:8d:cd:26:f3:2b",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-5f0e2c07",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.225"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-225.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-009e8e42",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.225"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-f7a2c5e8",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Instance1",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "1.1",
                            "Key": "Version"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-7f633a99",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "ec2-52-18-29-112.eu-west-1.compute.amazonaws.com",
                    "Platform": "windows",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:21:50.000Z",
                    "PublicIpAddress": "52.18.29.112",
                    "PrivateIpAddress": "10.5.0.142",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-edd90c40",
                    "ImageId": "ami-c1740ab6",
                    "PrivateDnsName": "ip-10-5-0-142.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-CLISecurityGroup-L
V1AMCAIX3JB",
                            "GroupId": "sg-43060b26"
                        }
                    ],
                    "ClientToken": "qlsta-Comma-1BJ41YAZW79MS",
                    "SubnetId": "subnet-481ba511",
                    "InstanceType": "t2.medium",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:19:a2:f1:05:c3",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "Association": {
                                "PublicIp": "52.18.29.112",
                                "PublicDnsName": "ec2-52-18-29-112.eu-west-1.compute.amazonaws.com",
                                "IpOwnerId": "amazon"
                            },
                            "NetworkInterfaceId": "eni-ff0e2ca7",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-0-142.eu-west-1.compute.internal",
                                    "Association": {
                                        "PublicIp": "52.18.29.112",
                                        "PublicDnsName": "ec2-52-18-29-112.eu-west-1.compute.amazonaws.com",
                                        "IpOwnerId": "amazon"
                                    },
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.0.142"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-0-142.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-929e8ed0",
                                "AttachTime": "2015-07-08T07:21:50.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-CLISecurit
yGroup-LV1AMCAIX3JB",
                                    "GroupId": "sg-43060b26"
                                }
                            ],
                            "SubnetId": "subnet-481ba511",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.0.142"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/sda1",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-45a1c65a",
                                "AttachTime": "2015-07-08T07:21:53.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "IamInstanceProfile": {
                        "Id": "AIPAJBK6OZMQQY2THHW3W",
                        "Arn": "arn:aws:iam::696974783300:instance-profile/qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a98
7-5d7a4b867ba2-RootInstanceProfile-90GICQ69WEJ"
                    },
                    "RootDeviceName": "/dev/sda1",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "CommandHostInstance",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "Command Host Instance",
                            "Key": "Name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-91603977",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "ec2-52-17-213-126.eu-west-1.compute.amazonaws.com",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:53.000Z",
                    "PublicIpAddress": "52.17.213.126",
                    "PrivateIpAddress": "10.5.0.122",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-e6de0b4b",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-0-122.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-NATSecurityGroup-V
U8UWGYU7ESF",
                            "GroupId": "sg-41060b24"
                        }
                    ],
                    "ClientToken": "qlsta-NATIn-3RB9UCJZFVAW",
                    "SubnetId": "subnet-481ba511",
                    "InstanceType": "t2.small",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:b4:48:b5:a0:61",
                            "SourceDestCheck": false,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "Association": {
                                "PublicIp": "52.17.213.126",
                                "PublicDnsName": "ec2-52-17-213-126.eu-west-1.compute.amazonaws.com",
                                "IpOwnerId": "amazon"
                            },
                            "NetworkInterfaceId": "eni-410e2c19",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-0-122.eu-west-1.compute.internal",
                                    "Association": {
                                        "PublicIp": "52.17.213.126",
                                        "PublicDnsName": "ec2-52-17-213-126.eu-west-1.compute.amazonaws.com",
                                        "IpOwnerId": "amazon"
                                    },
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.0.122"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-0-122.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-509e8e12",
                                "AttachTime": "2015-07-08T07:20:53.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-NATSecurit
yGroup-VU8UWGYU7ESF",
                                    "GroupId": "sg-41060b24"
                                }
                            ],
                            "SubnetId": "subnet-481ba511",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.0.122"
                        }
                    ],
                    "SourceDestCheck": false,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-caa2c5d5",
                                "AttachTime": "2015-07-08T07:20:56.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "NATInstance",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "NAT",
                            "Key": "Name"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-1a6039fc",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T08:58:26.000Z",
                    "PrivateIpAddress": "10.5.1.171",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-d0df0a7d",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSecurityGr
oup-1QT6XT8BIGW4K",
                            "GroupId": "sg-40060b25"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1ZWJZ34Z52Z6",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:4a:8e:12:d4:ff",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-5d0e2c05",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.171"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-171.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-769e8e34",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSe
curityGroup-1QT6XT8BIGW4K",
                                    "GroupId": "sg-40060b25"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.171"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-dda2c5c2",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "1.1",
                            "Key": "Version"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "Instance2",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-92603974",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.212",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-e3de0b4e",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1MCKTDVXKKRW0",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:d0:8f:55:8f:71",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-500e2c08",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.212"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-212.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-ba9d8df8",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.212"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-8fa2c590",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Instance4",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-046138e2",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.239",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-49df0ae4",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-239.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSecurityGr
oup-1QT6XT8BIGW4K",
                            "GroupId": "sg-40060b25"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-WJ3YVK4PN98Z",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:d8:3e:93:0d:bb",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-520e2c0a",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-239.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.239"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-239.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-1e9e8e5c",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSe
curityGroup-1QT6XT8BIGW4K",
                                    "GroupId": "sg-40060b25"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.239"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-bda2c5a2",
                                "AttachTime": "2015-07-08T07:20:52.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "Experiment1",
                            "Key": "Project"
                        },
                        {
                            "Value": "development",
                            "Key": "Environment"
                        },
                        {
                            "Value": "Instance9",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "db",
                            "Key": "Name"
                        },
                        {
                            "Value": "EOM ETL",
                            "Key": "Application"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "Finance",
                            "Key": "Department"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-d9633a3f",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:48.000Z",
                    "PrivateIpAddress": "10.5.1.153",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-27de0b8a",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-ZZIR6Q7RGIX0",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:c0:b9:d1:4b:97",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-570e2c0f",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.153"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-153.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-489e8e0a",
                                "AttachTime": "2015-07-08T07:20:48.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.153"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-2ea1c631",
                                "AttachTime": "2015-07-08T07:20:51.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "Instance6",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "production",
                            "Key": "Environment"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-93603975",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.183",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-e0de0b4d",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-OCABSDFF167C",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:84:f9:6f:d2:b5",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-510e2c09",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.183"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-183.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-bb9d8df9",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.183"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-bfa2c5a0",
                                "AttachTime": "2015-07-08T07:20:51.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "Instance8",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "production",
                            "Key": "Environment"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "app server",
                            "Key": "Name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-40633aa6",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:50.000Z",
                    "PrivateIpAddress": "10.5.1.139",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-fedf0a53",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-12GTEST9J45SN",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:8f:89:71:2f:4d",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-490e2c11",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.139"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-139.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-179e8e55",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.139"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-f6a2c5e9",
                                "AttachTime": "2015-07-08T07:20:53.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "production",
                            "Key": "Environment"
                        },
                        {
                            "Value": "Instance7",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        },
        {
            "OwnerId": "696974783300",
            "ReservationId": "r-5e633ab8",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-08T07:20:47.000Z",
                    "PrivateIpAddress": "10.5.1.14",
                    "ProductCodes": [],
                    "VpcId": "vpc-b668ebd3",
                    "StateTransitionReason": "",
                    "InstanceId": "i-ffdf0a52",
                    "ImageId": "ami-6e7bd919",
                    "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L403-10660",
                    "SecurityGroups": [
                        {
                            "GroupName": "default",
                            "GroupId": "sg-93070af6"
                        }
                    ],
                    "ClientToken": "qlsta-Insta-1SVBXTD3P77ZQ",
                    "SubnetId": "subnet-4b1ba512",
                    "InstanceType": "t2.micro",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "0a:65:31:05:b2:1f",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-b668ebd3",
                            "Description": "",
                            "NetworkInterfaceId": "eni-550e2c0d",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.1.14"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-1-14.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-019e8e43",
                                "AttachTime": "2015-07-08T07:20:47.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "default",
                                    "GroupId": "sg-93070af6"
                                }
                            ],
                            "SubnetId": "subnet-4b1ba512",
                            "OwnerId": "696974783300",
                            "PrivateIpAddress": "10.5.1.14"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/xvda",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-16a1c609",
                                "AttachTime": "2015-07-08T07:20:50.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "RootDeviceName": "/dev/xvda",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "HR",
                            "Key": "Department"
                        },
                        {
                            "Value": "web server",
                            "Key": "Name"
                        },
                        {
                            "Value": "Instance3",
                            "Key": "aws:cloudformation:logical-id"
                        },
                        {
                            "Value": "qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2",
                            "Key": "aws:cloudformation:stack-name"
                        },
                        {
                            "Value": "arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3
e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4",
                            "Key": "aws:cloudformation:stack-id"
                        },
                        {
                            "Value": "portal",
                            "Key": "Application"
                        },
                        {
                            "Value": "1.0",
                            "Key": "Version"
                        },
                        {
                            "Value": "ERPSystem",
                            "Key": "Project"
                        },
                        {
                            "Value": "staging",
                            "Key": "Environment"
                        },
                        {
                            "Value": "qa",
                            "Key": "CustomerName"
                        },
                        {
                            "Value": "403",
                            "Key": "LabName"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        }
    ]
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3865                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3878                             12 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3836                              4 {}



PS C:\Windows\system32> $allinstances = aws ec2 describe-instances | out-string | ConvertFrom-Json

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3912                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3926                              0 {System.Management.Automati...



PS C:\Windows\system32> $allinstances.count

PS C:\Windows\system32> $allinstances

Reservations
------------
{@{OwnerId=696974783300; ReservationId=r-d8633a3e; Groups=System.Object[]; Instances=System.Object[]}, @{OwnerId=69697478...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3928                              0 {System.Management.Automati...



PS C:\Windows\system32> $allinstances = aws ec2 describe-instances | out-string | ConvertFrom-Json | select -expand reservations

PS C:\Windows\system32> $allinstances.count
12

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3965                              1 {System.Management.Automati...



PS C:\Windows\system32> $allinstances | ft -auto

OwnerId      ReservationId Groups Instances
-------      ------------- ------ ---------
696974783300 r-d8633a3e    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-056138e3    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-5f633ab9    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T08:58...
696974783300 r-7f633a99    {}     {@{Monitoring=; PublicDnsName=ec2-52-18-29-112.eu-west-1.compute.amazonaws.com; Platfor...
696974783300 r-91603977    {}     {@{Monitoring=; PublicDnsName=ec2-52-17-213-126.eu-west-1.compute.amazonaws.com; State=...
696974783300 r-1a6039fc    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T08:58...
696974783300 r-92603974    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-046138e2    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-d9633a3f    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-93603975    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-40633aa6    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...
696974783300 r-5e633ab8    {}     {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           3979                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4007                              0 {System.Management.Automati...



PS C:\Windows\system32> $allinstances.instances | ft -auto

Monitoring        PublicDnsName                                     State                    EbsOptimized LaunchTime
----------        -------------                                     -----                    ------------ ----------
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T08:5...
@{State=disabled} ec2-52-18-29-112.eu-west-1.compute.amazonaws.com  @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled} ec2-52-17-213-126.eu-west-1.compute.amazonaws.com @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T08:5...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...
@{State=disabled}                                                   @{Code=16; Name=running}        False 2015-07-08T07:2...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4064                              3 {}



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4071                              0 {System.Management.Automati...



PS C:\Windows\system32> $allinstances.instances | select -first | fl
>> TerminatingError(Select-Object): "Missing an argument for parameter 'First'. Specify a parameter of type 'System.Int32' and try again."
Select-Object : Missing an argument for parameter 'First'. Specify a parameter of type 'System.Int32' and try again.
At line:1 char:34
+ $allinstances.instances | select -first | fl
+                                  ~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Select-Object], ParameterBindingException
    + FullyQualifiedErrorId : MissingArgument,Microsoft.PowerShell.Commands.SelectObjectCommand


PS C:\Windows\system32> $allinstances.instances | select -first 1 | fl


Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.168
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-71dc09dc
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-168.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-9FA3ZT4JFDZU
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:52:a3:52:02:fb; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-530e2c0b; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-168.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.168}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=Experiment1; Key=Project}, @{Value=Finance; Key=Department}, @{Value=development;
                        Key=Environment}, @{Value=403; Key=LabName}...}
AmiLaunchIndex        : 0




              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4081                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4095                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4107                              6 {System.Management.Automati...



PS C:\Windows\system32> $allinstances.instances | group-object subnetid

Count Name                      Group
----- ----                      -----
   10 subnet-4b1ba512           {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20:4...
    2 subnet-481ba511           {@{Monitoring=; PublicDnsName=ec2-52-18-29-112.eu-west-1.compute.amazonaws.com; Platform=...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4132                              1 {System.Management.Automati...



PS C:\Windows\system32> $allinstances = (aws ec2 describe-instances | out-string | ConvertFrom-Json).reservations.instances

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4235                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4251                              6 {System.Management.Automati...



PS C:\Windows\system32> $allinstances | group-object subnetid

Count Name                      Group
----- ----                      -----
   10 subnet-4b1ba512           {@{Monitoring=; PublicDnsName=; State=; EbsOptimized=False; LaunchTime=2015-07-08T07:20:4...
    2 subnet-481ba511           {@{Monitoring=; PublicDnsName=ec2-52-18-29-112.eu-west-1.compute.amazonaws.com; Platform=...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4276                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4294                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4276                              2 {System.Management.Automati...



PS C:\Windows\system32> $allinstances | ?{$_.subnetid -eq "subnet-4b1ba512"}


Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.168
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-71dc09dc
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-168.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-9FA3ZT4JFDZU
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:52:a3:52:02:fb; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-530e2c0b; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-168.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.168}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=Experiment1; Key=Project}, @{Value=Finance; Key=Department}, @{Value=development;
                        Key=Environment}, @{Value=403; Key=LabName}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.170
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-48df0ae5
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-170.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-13BLKI0PO9M2A
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:54:3d:7e:cd:e9; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-540e2c0c; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-170.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.170}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=HR; Key=Department}, @{Value=ERPSystem; Key=Project}, @{Value=app server; Key=Name},
                        @{Value=portal; Key=Application}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T08:58:26.000Z
PrivateIpAddress      : 10.5.1.225
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-fcdf0a51
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-225.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-1MGAK17BLKO4U
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:8d:cd:26:f3:2b; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-5f0e2c07; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-225.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.225}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=Instance1; Key=aws:cloudformation:logical-id}, @{Value=web server; Key=Name},
                        @{Value=portal; Key=Application}, @{Value=1.1; Key=Version}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T08:58:26.000Z
PrivateIpAddress      : 10.5.1.171
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-d0df0a7d
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-171.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSecurityGroup-1
                        QT6XT8BIGW4K; GroupId=sg-40060b25}}
ClientToken           : qlsta-Insta-1ZWJZ34Z52Z6
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:4a:8e:12:d4:ff; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-5d0e2c05; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-171.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.171}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=1.1; Key=Version}, @{Value=portal; Key=Application}, @{Value=Instance2;
                        Key=aws:cloudformation:logical-id}, @{Value=arn:aws:cloudformation:eu-west-1:696974783300:stack/qlst
                        ack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4;
                        Key=aws:cloudformation:stack-id}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.212
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-e3de0b4e
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-212.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-1MCKTDVXKKRW0
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:d0:8f:55:8f:71; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-500e2c08; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-212.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.212}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=Instance4; Key=aws:cloudformation:logical-id}, @{Value=HR; Key=Department}, @{Value=1.0;
                        Key=Version}, @{Value=ERPSystem; Key=Project}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.239
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-49df0ae4
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-239.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2-WideOpenSecurityGroup-1
                        QT6XT8BIGW4K; GroupId=sg-40060b25}}
ClientToken           : qlsta-Insta-WJ3YVK4PN98Z
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:d8:3e:93:0d:bb; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-520e2c0a; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-239.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.239}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2;
                        Key=aws:cloudformation:stack-name}, @{Value=1.0; Key=Version}, @{Value=qa; Key=CustomerName},
                        @{Value=Experiment1; Key=Project}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:48.000Z
PrivateIpAddress      : 10.5.1.153
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-27de0b8a
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-153.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-ZZIR6Q7RGIX0
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:c0:b9:d1:4b:97; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-570e2c0f; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-153.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.153}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack2-labinstance-10660-aff32c3e-fbf
                        e-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4; Key=aws:cloudformation:stack-id},
                        @{Value=Instance6; Key=aws:cloudformation:logical-id}, @{Value=portal; Key=Application},
                        @{Value=403; Key=LabName}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.183
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-e0de0b4d
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-183.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-OCABSDFF167C
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:84:f9:6f:d2:b5; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-510e2c09; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-183.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.183}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=ERPSystem; Key=Project}, @{Value=HR; Key=Department}, @{Value=Instance8;
                        Key=aws:cloudformation:logical-id}, @{Value=arn:aws:cloudformation:eu-west-1:696974783300:stack/qlst
                        ack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4;
                        Key=aws:cloudformation:stack-id}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:50.000Z
PrivateIpAddress      : 10.5.1.139
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-fedf0a53
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-139.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-12GTEST9J45SN
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:8f:89:71:2f:4d; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-490e2c11; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-139.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.139}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=production; Key=Environment}, @{Value=Instance7; Key=aws:cloudformation:logical-id},
                        @{Value=ERPSystem; Key=Project}, @{Value=qa; Key=CustomerName}...}
AmiLaunchIndex        : 0

Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.14
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-ffdf0a52
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-14.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-1SVBXTD3P77ZQ
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:65:31:05:b2:1f; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-550e2c0d; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-14.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.14}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=HR; Key=Department}, @{Value=web server; Key=Name}, @{Value=Instance3;
                        Key=aws:cloudformation:logical-id},
                        @{Value=qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2;
                        Key=aws:cloudformation:stack-name}...}
AmiLaunchIndex        : 0




PS C:\Windows\system32> $privatesubnetinstances = $allinstances | ?{$_.subnetid -eq "subnet-4b1ba512"}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4358                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4382                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4398                              0 {System.Management.Automati...



PS C:\Windows\system32> $privatesubnetinstances | select -first 1


Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.168
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-71dc09dc
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-168.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-9FA3ZT4JFDZU
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:52:a3:52:02:fb; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-530e2c0b; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-168.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.168}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=Experiment1; Key=Project}, @{Value=Finance; Key=Department}, @{Value=development;
                        Key=Environment}, @{Value=403; Key=LabName}...}
AmiLaunchIndex        : 0




PS C:\Windows\system32> ($privatesubnetinstances | select -first 1).Tags

Value                                                          Key
-----                                                          ---
Experiment1                                                    Project
Finance                                                        Department
development                                                    Environment
403                                                            LabName
1.0                                                            Version
web server                                                     Name
qlstack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b86... aws:cloudformation:stack-name
arn:aws:cloudformation:eu-west-1:696974783300:stack/qlstack... aws:cloudformation:stack-id
Instance10                                                     aws:cloudformation:logical-id
qa                                                             CustomerName
EOM ETL                                                        Application



PS C:\Windows\system32> ($privatesubnetinstances | select -first 1).Tags | gm


   TypeName: System.Management.Automation.PSCustomObject

Name        MemberType   Definition
----        ----------   ----------
Equals      Method       bool Equals(System.Object obj)
GetHashCode Method       int GetHashCode()
GetType     Method       type GetType()
ToString    Method       string ToString()
Key         NoteProperty System.String Key=Project
Value       NoteProperty System.String Value=Experiment1



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4460                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4488                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4500                              1 {System.Management.Automati...



PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags | ?{$_.key -eq "Environment"}).Value -eq "Finance"}

PS C:\Windows\system32> $privatesubnetinstances | %{($_.tags | ?{$_.key -eq "Environment"}).Value}
development
staging
development
development
staging
development
production
production
production
staging

PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment")}

PS C:\Windows\system32> $privatesubnetinstances | %{($_.tags.Key)}
Project
Department
Environment
LabName
Version
Name
aws:cloudformation:stack-name
aws:cloudformation:stack-id
aws:cloudformation:logical-id
CustomerName
Application
Department
Project
Name
Application
Version
CustomerName
aws:cloudformation:logical-id
aws:cloudformation:stack-name
LabName
aws:cloudformation:stack-id
Environment
aws:cloudformation:logical-id
Name
Application
Version
Department
aws:cloudformation:stack-id
CustomerName
aws:cloudformation:stack-name
LabName
Project
Environment
Version
Application
aws:cloudformation:logical-id
aws:cloudformation:stack-id
LabName
CustomerName
Environment
Name
Project
aws:cloudformation:stack-name
Department
aws:cloudformation:logical-id
Department
Version
Project
Name
Environment
Application
CustomerName
aws:cloudformation:stack-id
LabName
aws:cloudformation:stack-name
aws:cloudformation:stack-name
Version
CustomerName
Project
Environment
aws:cloudformation:logical-id
Name
Application
aws:cloudformation:stack-id
Department
LabName
aws:cloudformation:stack-id
aws:cloudformation:logical-id
Application
LabName
Name
Version
Project
CustomerName
aws:cloudformation:stack-name
Department
Environment
Project
Department
aws:cloudformation:logical-id
aws:cloudformation:stack-id
Environment
CustomerName
aws:cloudformation:stack-name
Version
Application
LabName
Name
Environment
aws:cloudformation:logical-id
Project
CustomerName
Version
Name
Department
aws:cloudformation:stack-name
Application
LabName
aws:cloudformation:stack-id
Department
Name
aws:cloudformation:logical-id
aws:cloudformation:stack-name
aws:cloudformation:stack-id
Application
Version
Project
Environment
CustomerName
LabName

PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment")}

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Environment,Values=development" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone}'
[
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-71dc09dc"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-fcdf0a51"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-d0df0a7d"
        }
    ],
    [
        {
            "AZ": "eu-west-1a",
            "ID": "i-49df0ae4"
        }
    ]
]

PS C:\Windows\system32> aws ec2 describe-instances --filter "Name=tag:Environment,Values=''" --query 'Reservations[*].Instances[*].{ID:InstanceId,AZ:Placement.AvailabilityZone}'

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4970                              4 {System.Management.Automati...



PS C:\Windows\system32> get-content "c:\temp\terminate-instances.ps1"
param (
[string] $region = "us-west-2",
[string] $subnetid
)

import-module "C:\Program Files (x86)\AWS Tools\PowerShell\AWSPowerShell\AWSPowerShell.psd1"

Set-DefaultAWSRegion($region)

$nonCompliantInstances = [System.Collections.ArrayList]@()

# Obtain a list of all instances with the Environment tag set.
$instancesGood = @{}
$filter = New-Object Amazon.EC2.Model.Filter -Property @{Name = "tag-key"; Values = "Environment"}
$reservations = Get-Ec2Instance -Filter $filter
foreach ($instance in $reservations.instances) {
	$instancesGood.Add($instance.InstanceId, 1)
}

Write-Host "Compliant instances found: " $instancesGood.count

# Obtain a list of all instances.
$vpcFilter = New-Object Amazon.EC2.Model.Filter -Property @{Name = "subnet-id"; Values = $subnetid}
$reservations = Get-Ec2Instance -Filter $vpcFilter
Write-Host "All instances: " $reservations.instances.count
foreach ($instance in $reservations.instances) {
	if ($instancesGood.ContainsKey($instance.InstanceId) -eq $false) {
		[void]$nonCompliantInstances.Add($instance.InstanceId)
	}
}

# Terminate all non-compliant instances.
if ($nonCompliantInstances.count -gt 0) {
	Write-Host "Non-compliant instances found: " $nonCompliantInstances.count
	Stop-Ec2Instance -Instance $nonCompliantInstances -Terminate
	Write-Host "Instances terminated."
} else {
	Write-Host "No non-compliant instances found."
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5132                              5 {}



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5132                             10 {}



PS C:\Windows\system32> c:\temp\terminate-instances.ps1 -region "eu-west-1" -subnetid "subnet-4b1ba512"

PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment")}

PS C:\Windows\system32> $allinstances = (aws ec2 describe-instances | out-string | ConvertFrom-Json).reservations.instances
$privatesubnetinstances = $allinstances | ?{$_.subnetid -eq "subnet-4b1ba512"}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5399                              1 {System.Management.Automati...



PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment")}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5498                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5511                              1 {System.Management.Automati...



PS C:\Windows\system32> $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment") -or (($_.tags | ?{$_.key -eq "Environment"}).Value -eq "")}


Monitoring            : @{State=disabled}
PublicDnsName         :
State                 : @{Code=16; Name=running}
EbsOptimized          : False
LaunchTime            : 2015-07-08T07:20:47.000Z
PrivateIpAddress      : 10.5.1.183
ProductCodes          : {}
VpcId                 : vpc-b668ebd3
StateTransitionReason :
InstanceId            : i-e0de0b4d
ImageId               : ami-6e7bd919
PrivateDnsName        : ip-10-5-1-183.eu-west-1.compute.internal
KeyName               : qwikLABS-L403-10660
SecurityGroups        : {@{GroupName=default; GroupId=sg-93070af6}}
ClientToken           : qlsta-Insta-OCABSDFF167C
SubnetId              : subnet-4b1ba512
InstanceType          : t2.micro
NetworkInterfaces     : {@{Status=in-use; MacAddress=0a:84:f9:6f:d2:b5; SourceDestCheck=True; VpcId=vpc-b668ebd3;
                        Description=; NetworkInterfaceId=eni-510e2c09; PrivateIpAddresses=System.Object[];
                        PrivateDnsName=ip-10-5-1-183.eu-west-1.compute.internal; Attachment=; Groups=System.Object[];
                        SubnetId=subnet-4b1ba512; OwnerId=696974783300; PrivateIpAddress=10.5.1.183}}
SourceDestCheck       : True
Placement             : @{Tenancy=default; GroupName=; AvailabilityZone=eu-west-1a}
Hypervisor            : xen
BlockDeviceMappings   : {@{DeviceName=/dev/xvda; Ebs=}}
Architecture          : x86_64
RootDeviceType        : ebs
RootDeviceName        : /dev/xvda
VirtualizationType    : hvm
Tags                  : {@{Value=ERPSystem; Key=Project}, @{Value=HR; Key=Department}, @{Value=Instance8;
                        Key=aws:cloudformation:logical-id}, @{Value=arn:aws:cloudformation:eu-west-1:696974783300:stack/qlst
                        ack2-labinstance-10660-aff32c3e-fbfe-4ffd-a987-5d7a4b867ba2/9cca6540-2541-11e5-b79b-5001411350b4;
                        Key=aws:cloudformation:stack-id}...}
AmiLaunchIndex        : 0




PS C:\Windows\system32> $noncompliantinstances = $privatesubnetinstances | ?{($_.tags.Key -notcontains "Environment") -or (($_.tags | ?{$_.key -eq "Environment"}).Value -eq "")}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5554                              1 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5581                              5 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5581                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5607                              0 {System.Management.Automati...



PS C:\Windows\system32> $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId}
>> TerminatingError(Get-EC2Instance): "No region specified or obtained from persisted/shell defaults."
Get-EC2Instance : No region specified or obtained from persisted/shell defaults.
At line:1 char:28
+ $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId}
+                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (Amazon.PowerShe...2InstanceCmdlet:GetEC2InstanceCmdlet) [Get-EC2Instance],
    InvalidOperationException
    + FullyQualifiedErrorId : InvalidOperationException,Amazon.PowerShell.Cmdlets.EC2.GetEC2InstanceCmdlet


              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5629                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5629                              5 {}



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5629                             10 {}



PS C:\Windows\system32> $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId -Region "eu-west-1"}


GroupNames    : {}
Groups        : {}
Instances     : {qwikLABS-L403-10660}
OwnerId       : 696974783300
RequesterId   :
ReservationId : r-93603975




              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5644                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5644                             10 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5672                              0 {System.Management.Automati...



PS C:\Windows\system32> $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId -Region "eu-west-1"} | Stop-EC2Instance -Terminate -WhatIf
>> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(Stop-EC2Instance): "No region specified or obtained from persisted/shell defaults."
Stop-EC2Instance : No region specified or obtained from persisted/shell defaults.
At line:1 char:91
+ ... "eu-west-1"} | Stop-EC2Instance -Terminate -WhatIf
+                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (Amazon.PowerShe...2InstanceCmdlet:StopEC2InstanceCmdlet) [Stop-EC2Instance
   ], InvalidOperationException
    + FullyQualifiedErrorId : InvalidOperationException,Amazon.PowerShell.Cmdlets.EC2.StopEC2InstanceCmdlet


              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5680                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5688                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5688                              5 {}



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5688                             10 {}



PS C:\Windows\system32> $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId -Region "eu-west-1"} | Stop-EC2Instance -Terminate -WhatIf -Region "eu-west-1"
What if: Performing the operation "Stop-EC2Instance (TerminateInstances)" on target "i-e0de0b4d".

PS C:\Windows\system32> $noncompliantinstances | %{Get-EC2Instance -Instance $_.InstanceId -Region "eu-west-1"} | Stop-EC2Instance -Terminate -Region "eu-west-1"

CurrentState                              InstanceId                                PreviousState
------------                              ----------                                -------------
Amazon.EC2.Model.InstanceState            i-e0de0b4d                                Amazon.EC2.Model.InstanceState


