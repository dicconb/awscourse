**********************
Windows PowerShell transcript start
Start time: 20150707122637
Username: WIN-FFRLCUINKFO\Administrator
RunAs User: WIN-FFRLCUINKFO\Administrator
Machine: WIN-FFRLCUINKFO (Microsoft Windows NT 6.2.9200.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell_ise.exe
Process ID: 1492
**********************
Transcript started, output file is C:\Users\Administrator\Documents\giterpos\awscourse\Lab3W.transcript

PS C:\Windows\system32> aws ec2 describe-instances --filter 'Name=tag:Name,Values=Processor'
{
    "Reservations": [
        {
            "OwnerId": "757392372568",
            "ReservationId": "r-cc430c28",
            "Groups": [],
            "Instances": [
                {
                    "Monitoring": {
                        "State": "disabled"
                    },
                    "PublicDnsName": "ec2-52-18-93-252.eu-west-1.compute.amazonaws.com",
                    "Platform": "windows",
                    "State": {
                        "Code": 16,
                        "Name": "running"
                    },
                    "EbsOptimized": false,
                    "LaunchTime": "2015-07-07T12:13:19.000Z",
                    "PublicIpAddress": "52.18.93.252",
                    "PrivateIpAddress": "10.5.0.253",
                    "ProductCodes": [],
                    "VpcId": "vpc-ec9b1889",
                    "StateTransitionReason": "",
                    "InstanceId": "i-ea821a40",
                    "ImageId": "ami-c1740ab6",
                    "PrivateDnsName": "ip-10-5-0-253.eu-west-1.compute.internal",
                    "KeyName": "qwikLABS-L474-10607",
                    "SecurityGroups": [
                        {
                            "GroupName": "RDP Access",
                            "GroupId": "sg-e5fffd80"
                        }
                    ],
                    "ClientToken": "ocwRH1436271199396",
                    "SubnetId": "subnet-fba9d59e",
                    "InstanceType": "t2.medium",
                    "NetworkInterfaces": [
                        {
                            "Status": "in-use",
                            "MacAddress": "02:73:b6:a3:d6:09",
                            "SourceDestCheck": true,
                            "VpcId": "vpc-ec9b1889",
                            "Description": "Primary network interface",
                            "Association": {
                                "PublicIp": "52.18.93.252",
                                "PublicDnsName": "ec2-52-18-93-252.eu-west-1.compute.amazonaws.com",
                                "IpOwnerId": "amazon"
                            },
                            "NetworkInterfaceId": "eni-b237d6d5",
                            "PrivateIpAddresses": [
                                {
                                    "PrivateDnsName": "ip-10-5-0-253.eu-west-1.compute.internal",
                                    "Association": {
                                        "PublicIp": "52.18.93.252",
                                        "PublicDnsName": "ec2-52-18-93-252.eu-west-1.compute.amazonaws.com",
                                        "IpOwnerId": "amazon"
                                    },
                                    "Primary": true,
                                    "PrivateIpAddress": "10.5.0.253"
                                }
                            ],
                            "PrivateDnsName": "ip-10-5-0-253.eu-west-1.compute.internal",
                            "Attachment": {
                                "Status": "attached",
                                "DeviceIndex": 0,
                                "DeleteOnTermination": true,
                                "AttachmentId": "eni-attach-0e16354d",
                                "AttachTime": "2015-07-07T12:13:19.000Z"
                            },
                            "Groups": [
                                {
                                    "GroupName": "RDP Access",
                                    "GroupId": "sg-e5fffd80"
                                }
                            ],
                            "SubnetId": "subnet-fba9d59e",
                            "OwnerId": "757392372568",
                            "PrivateIpAddress": "10.5.0.253"
                        }
                    ],
                    "SourceDestCheck": true,
                    "Placement": {
                        "Tenancy": "default",
                        "GroupName": "",
                        "AvailabilityZone": "eu-west-1a"
                    },
                    "Hypervisor": "xen",
                    "BlockDeviceMappings": [
                        {
                            "DeviceName": "/dev/sda1",
                            "Ebs": {
                                "Status": "attached",
                                "DeleteOnTermination": true,
                                "VolumeId": "vol-cbc9d9dc",
                                "AttachTime": "2015-07-07T12:13:23.000Z"
                            }
                        }
                    ],
                    "Architecture": "x86_64",
                    "RootDeviceType": "ebs",
                    "IamInstanceProfile": {
                        "Id": "AIPAJ7HTI4DABFET35OMG",
                        "Arn": "arn:aws:iam::757392372568:instance-profile/S3BucketAccess"
                    },
                    "RootDeviceName": "/dev/sda1",
                    "VirtualizationType": "hvm",
                    "Tags": [
                        {
                            "Value": "Processor",
                            "Key": "Name"
                        }
                    ],
                    "AmiLaunchIndex": 0
                }
            ]
        }
    ]
}

PS C:\Windows\system32> aws ec2 describe-instances --filter 'Name=tag:Name,Values=Processor' --query 'Reservations[0].Instances[0].BlockDeviceMappings[0].Ebs.{VolumeId:VolumeId}'
{
    "VolumeId": "vol-cbc9d9dc"
}

PS C:\Windows\system32> aws ec2 describe-instances --filters 'Name=tag:Name,Values=Processor' --query 'Reservations[0].Instances[0].InstanceId'
"i-ea821a40"

PS C:\Windows\system32> aws ec2 stop-instances --instance-ids "i-ea821a40"
{
    "StoppingInstances": [
        {
            "InstanceId": "i-ea821a40",
            "CurrentState": {
                "Code": 64,
                "Name": "stopping"
            },
            "PreviousState": {
                "Code": 16,
                "Name": "running"
            }
        }
    ]
}

PS C:\Windows\system32> aws ec2 describe-instance-status --instance-id "i-ea821a40"
{
    "InstanceStatuses": []
}

PS C:\Windows\system32> aws ec2 describe-instance-status --instance-id "i-ea821a40"
{
    "InstanceStatuses": []
}

PS C:\Windows\system32> aws ec2 create-snapshot --volume-id "vol-cbc9d9dc"
{
    "Description": "",
    "Encrypted": false,
    "VolumeId": "vol-cbc9d9dc",
    "State": "pending",
    "VolumeSize": 35,
    "Progress": "",
    "StartTime": "2015-07-07T12:29:07.000Z",
    "SnapshotId": "snap-6e5a3638",
    "OwnerId": "757392372568"
}

PS C:\Windows\system32> aws ec2 describe-snapshots --snapshot-id "snap-6e5a3638"
{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> aws ec2 start-instances --instance-ids "i-ea821a40"
{
    "StartingInstances": [
        {
            "InstanceId": "i-ea821a40",
            "CurrentState": {
                "Code": 0,
                "Name": "pending"
            },
            "PreviousState": {
                "Code": 80,
                "Name": "stopped"
            }
        }
    ]
}

PS C:\Windows\system32> aws ec2 describe-instance-status --instance-id "i-ea821a40"
{
    "InstanceStatuses": [
        {
            "InstanceId": "i-ea821a40",
            "InstanceState": {
                "Code": 16,
                "Name": "running"
            },
            "AvailabilityZone": "eu-west-1a",
            "SystemStatus": {
                "Status": "initializing",
                "Details": [
                    {
                        "Status": "initializing",
                        "Name": "reachability"
                    }
                ]
            },
            "InstanceStatus": {
                "Status": "initializing",
                "Details": [
                    {
                        "Status": "initializing",
                        "Name": "reachability"
                    }
                ]
            }
        }
    ]
}

PS C:\Windows\system32> type C:\Users\Administrator\.aws\config
[default]
region = eu-west-1

PS C:\Windows\system32> aws ec2 create-snapshot --volume-id "vol-cbc9d9dc" --region "eu-west-1" >c:\temp\output.txt 2>&1
>> ParameterBinding(Out-File): name="InputObject"; value="{"
>> ParameterBinding(Out-File): name="InputObject"; value="    "Description": "", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "Encrypted": false, "
>> ParameterBinding(Out-File): name="InputObject"; value="    "VolumeId": "vol-cbc9d9dc", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "State": "pending", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "VolumeSize": 35, "
>> ParameterBinding(Out-File): name="InputObject"; value="    "Progress": "", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "StartTime": "2015-07-07T12:33:53.000Z", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "SnapshotId": "snap-2b12337f", "
>> ParameterBinding(Out-File): name="InputObject"; value="    "OwnerId": "757392372568""
>> ParameterBinding(Out-File): name="InputObject"; value="}"

PS C:\Windows\system32> net user backupuser passw0rd! /ADD
The command completed successfully.


PS C:\Windows\system32> c:\temp\ntrights +R SeBatchLogonRight -u backupuser
 Granting SeBatchLogonRight to backupuser   ... successful

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              4 {System.Management.Automati...



PS C:\Windows\system32> get-content c:\temp\backup.bat
get-content : Cannot find path 'C:\temp\backup.bat' because it does not exist.
At line:1 char:1
+ get-content c:\temp\backup.bat
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\temp\backup.bat:String) [Get-Content], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand


              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2152                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2161                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2161                              8 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2161                             15 {}



PS C:\Windows\system32> 'aws ec2 create-snapshot --volume-id "vol-cbc9d9dc" --region "eu-west-1" >c:\temp\output.txt 2>&1' | out-file C:\temp\backup.bat

PS C:\Windows\system32> schtasks /create /sc MINUTE /mo 1 /tn "Volume Backup Task" /ru backupuser /rp passw0rd! /tr c:\temp\backup.bat
SUCCESS: The scheduled task "Volume Backup Task" has successfully been created.

PS C:\Windows\system32> aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"
{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2623                              7 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2634                              7 {}



PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:39:52 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:41:12 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> schtasks /create /sc MINUTE /mo 1 /tn "Volume Backup Task" /ru backupuser /rp passw0rd! /tr c:\temp\backup.bat

PS C:\Windows\system32> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:44:57 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              8 {System.Management.Automati...



PS C:\Windows\system32> C:\temp\backup.bat

C:\Windows\system32>þa
C:\temp\backup.bat : 'þa' is not recognized as an internal or external command,
At line:1 char:1
+ C:\temp\backup.bat
+ ~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ('þa' is not rec...ternal command,:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

operable program or batch file.


              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              8                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              8                              8 {System.Management.Automati...



PS C:\Windows\system32> notepad C:\temp\backup.bat

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2165                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2168                              0 {System.Management.Automati...



PS C:\Windows\system32> 'aws ec2 create-snapshot --volume-id "vol-cbc9d9dc" --region "eu-west-1" >c:\temp\output.txt 2>&1' | out-file  -path "C:\temp\backup.bat" -Encoding ascii
>> TerminatingError(Out-File): "A parameter cannot be found that matches parameter name 'path'."
Out-File : A parameter cannot be found that matches parameter name 'path'.
At line:1 char:112
+ ... 1' | out-file  -path "C:\temp\backup.bat" -Encoding ascii
+                    ~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Out-File], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.OutFileCommand


PS C:\Windows\system32> 'aws ec2 create-snapshot --volume-id "vol-cbc9d9dc" --region "eu-west-1" >c:\temp\output.txt 2>&1' | out-file  -file "C:\temp\backup.bat" -Encoding ascii

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:46:04 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> C:\temp\backup.bat

C:\Windows\system32>aws ec2 create-snapshot --volume-id "vol-cbc9d9dc" --region "eu-west-1"  1>c:\temp\output.txt 2>&1

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:46:22 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:47:06 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:47:26 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2748                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2760                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              8 {System.Management.Automati...



PS C:\Windows\system32> get-content C:\temp\output.txt
{
    "Description": "",
    "Encrypted": false,
    "VolumeId": "vol-cbc9d9dc",
    "State": "pending",
    "VolumeSize": 35,
    "Progress": "",
    "StartTime": "2015-07-07T12:46:13.000Z",
    "SnapshotId": "snap-c76821e7",
    "OwnerId": "757392372568"
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:48:31 PM


{
    "Snapshots": [
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:33:53.000Z",
            "SnapshotId": "snap-2b12337f",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:29:07.000Z",
            "SnapshotId": "snap-6e5a3638",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           2748                             17 {}



PS C:\Windows\system32> "not working :(. seems to be a scheduled task problem"
not working :(. seems to be a scheduled task problem

PS C:\Windows\system32> schtasks /Delete /tn "Volume Backup Task"

PS C:\Windows\system32> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              5 {System.Management.Automati...



PS C:\Windows\system32> Stop-Transcript
**********************
Windows PowerShell transcript end
End time: 20150707125058
**********************
**********************
Windows PowerShell transcript start
Start time: 20150707125135
Username: WIN-FFRLCUINKFO\Administrator
RunAs User: WIN-FFRLCUINKFO\Administrator
Machine: WIN-FFRLCUINKFO (Microsoft Windows NT 6.2.9200.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell_ise.exe
Process ID: 2616
**********************
Transcript started, output file is C:\Users\Administrator\Documents\giterpos\awscourse\Lab3W.transcript

PS C:\Windows\system32> schtasks /Delete /tn "Volume Backup Task"

PS C:\Windows\system32> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

PS C:\Windows\system32> "doesn't work, deleting manually"
doesn't work, deleting manually

PS C:\Windows\system32> "deleted successfully"
deleted successfully

PS C:\Windows\system32> aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc" --query 'Snapshots[*].SnapshotId'
[
    "snap-2b12337f",
    "snap-6e5a3638",
    "snap-c76821e7"
]

PS C:\Windows\system32> c:\temp\snapshotter.ps1 "eu-west-1"

PS C:\Windows\system32> aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc" --query 'Snapshots[*].SnapshotId'
[
    "snap-7409c520",
    "snap-c76821e7"
]

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:55:03 PM


{
    "Snapshots": [
        {
            "Description": "Automated backup made by snapshotter.ps1",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:53:57.000Z",
            "SnapshotId": "snap-7409c520",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> "I think the scheduled task wasn't working because the original task hung"
I think the scheduled task wasn't working because the original task hung

PS C:\Windows\system32> schtasks /create /sc MINUTE /mo 1 /tn "Volume Backup Task" /ru backupuser /rp passw0rd! /tr c:\temp\backup.bat
SUCCESS: The scheduled task "Volume Backup Task" has successfully been created.

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:56:17 PM


{
    "Snapshots": [
        {
            "Description": "Automated backup made by snapshotter.ps1",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:53:57.000Z",
            "SnapshotId": "snap-7409c520",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:56:26 PM


{
    "Snapshots": [
        {
            "Description": "Automated backup made by snapshotter.ps1",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:53:57.000Z",
            "SnapshotId": "snap-7409c520",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> get-date | out-default;aws ec2 describe-snapshots --filters "Name=volume-id,Values=vol-cbc9d9dc"

Tuesday, July 7, 2015 12:57:27 PM


{
    "Snapshots": [
        {
            "Description": "Automated backup made by snapshotter.ps1",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:53:57.000Z",
            "SnapshotId": "snap-7409c520",
            "OwnerId": "757392372568"
        },
        {
            "Description": "",
            "Encrypted": false,
            "VolumeId": "vol-cbc9d9dc",
            "State": "completed",
            "VolumeSize": 35,
            "Progress": "100%",
            "StartTime": "2015-07-07T12:46:13.000Z",
            "SnapshotId": "snap-c76821e7",
            "OwnerId": "757392372568"
        }
    ]
}

PS C:\Windows\system32> "never mind"
never mind

PS C:\Windows\system32> schtasks /Delete /tn "Volume Backup Task"

PS C:\Windows\system32> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

PS C:\Windows\system32> schtasks /Delete /tn "Volume Backup Task"

PS C:\Windows\system32> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

PS C:\Windows\system32> "deleted manually again"
deleted manually again

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              5 {System.Management.Automati...



PS C:\Windows\system32> stop-transcript
**********************
Windows PowerShell transcript end
End time: 20150707130452
**********************
**********************
Windows PowerShell transcript start
Start time: 20150707130855
Username: WIN-KL3OLM8Q2K3\Administrator
RunAs User: WIN-KL3OLM8Q2K3\Administrator
Machine: WIN-KL3OLM8Q2K3 (Microsoft Windows NT 6.2.9200.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell_ise.exe C:\Users\Administrator\Documents\gitrepos\awscourse\Lab3W.ps1
Process ID: 3416
**********************
Transcript started, output file is .\Lab3W.transcript

PS C:\Users\Administrator\Documents\gitrepos\awscourse> "new instance (Processor)"
new instance (Processor)

PS C:\Users\Administrator\Documents\gitrepos\awscourse> aws configure

PS C:\Users\Administrator\Documents\gitrepos\awscourse> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              4                              6 {}



PS C:\Users\Administrator\Documents\gitrepos\awscourse> aws config
aws : usage: aws [options] <command> <subcommand> [parameters]
At line:1 char:1
+ aws config
+ ~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (usage: aws [opt...d> [parameters]:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

aws.exe: error: argument command: Invalid choice, valid choices are:

autoscaling                              | cloudformation
cloudfront                               | cloudhsm
cloudsearch                              | cloudsearchdomain
cloudtrail                               | cloudwatch
cognito-identity                         | cognito-sync
datapipeline                             | directconnect
ds                                       | dynamodb
ec2                                      | ecs
efs                                      | elasticache
elasticbeanstalk                         | elastictranscoder
elb                                      | emr
glacier                                  | iam
importexport                             | kinesis
kms                                      | lambda
logs                                     | machinelearning
opsworks                                 | rds
redshift                                 | route53
route53domains                           | sdb
ses                                      | sns
sqs                                      | ssm
storagegateway                           | sts
support                                  | swf
workspaces                               | s3api
s3                                       | configure
deploy                                   | configservice
help


Invalid choice: 'config', maybe you meant:

  * configure


PS C:\Users\Administrator\Documents\gitrepos\awscourse> aws configure

PS C:\Users\Administrator\Documents\gitrepos\awscourse> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

PS C:\Users\Administrator\Documents\gitrepos\awscourse> "aws configure apparently doesn't work in the ISE"
aws configure apparently doesn't work in the ISE

PS C:\Users\Administrator\Documents\gitrepos\awscourse> (New-Object System.Net.WebClient).DownloadFile("https://d2lrzjb0vjvpn5.cloudfront.net/sys-ops/v2.2/lab-3-storage-windows/static/loggen.ps1", "c:\temp\loggen.ps1")

PS C:\Users\Administrator\Documents\gitrepos\awscourse> c:\temp\loggen.ps1

PS C:\Users\Administrator\Documents\gitrepos\awscourse> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              9 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              8 {System.Management.Automati...



PS C:\Users\Administrator\Documents\gitrepos\awscourse> Get-Content C:\temp\timestamp.log
2015-07-07T13:13:27
2015-07-07T13:13:28
2015-07-07T13:13:29
2015-07-07T13:13:30
2015-07-07T13:13:31
2015-07-07T13:13:32
2015-07-07T13:13:33
2015-07-07T13:13:34
2015-07-07T13:13:35
2015-07-07T13:13:36
2015-07-07T13:13:37
2015-07-07T13:13:38
2015-07-07T13:13:39
2015-07-07T13:13:40
2015-07-07T13:13:41
2015-07-07T13:13:42
2015-07-07T13:13:43
2015-07-07T13:13:44
2015-07-07T13:13:45
2015-07-07T13:13:46
2015-07-07T13:13:47
2015-07-07T13:13:48
2015-07-07T13:13:49
2015-07-07T13:13:50
2015-07-07T13:13:51
2015-07-07T13:13:52
2015-07-07T13:13:53
2015-07-07T13:13:54
2015-07-07T13:13:55
2015-07-07T13:13:56
2015-07-07T13:13:57
2015-07-07T13:13:58
2015-07-07T13:13:59
2015-07-07T13:14:00
2015-07-07T13:14:01
2015-07-07T13:14:02
2015-07-07T13:14:03
2015-07-07T13:14:04
2015-07-07T13:14:05
2015-07-07T13:14:06
2015-07-07T13:14:07
2015-07-07T13:14:08
2015-07-07T13:14:09
2015-07-07T13:14:10
2015-07-07T13:14:11
2015-07-07T13:14:12
2015-07-07T13:14:13
2015-07-07T13:14:14
2015-07-07T13:14:15
2015-07-07T13:14:16
2015-07-07T13:14:17
2015-07-07T13:14:18
2015-07-07T13:14:19
2015-07-07T13:14:20
2015-07-07T13:14:21
2015-07-07T13:14:22
2015-07-07T13:14:23
2015-07-07T13:14:24
2015-07-07T13:14:25
2015-07-07T13:14:26
2015-07-07T13:14:27
2015-07-07T13:14:28
2015-07-07T13:14:29
2015-07-07T13:14:30
2015-07-07T13:14:31
2015-07-07T13:14:32
2015-07-07T13:14:33
2015-07-07T13:14:34
2015-07-07T13:14:35
2015-07-07T13:14:36
2015-07-07T13:14:37
2015-07-07T13:14:38
2015-07-07T13:14:39
2015-07-07T13:14:40
2015-07-07T13:14:41
2015-07-07T13:14:42
2015-07-07T13:14:44
2015-07-07T13:14:45
2015-07-07T13:14:46
2015-07-07T13:14:47
2015-07-07T13:14:48
2015-07-07T13:14:49
2015-07-07T13:14:50
2015-07-07T13:14:51
2015-07-07T13:14:52
2015-07-07T13:14:53
2015-07-07T13:14:54
2015-07-07T13:14:55
2015-07-07T13:14:56
2015-07-07T13:14:57
2015-07-07T13:14:58

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4353                             25 {}



PS C:\Users\Administrator\Documents\gitrepos\awscourse> invoke-command {c:\temp\loggen.ps1} -AsJob
>> TerminatingError(Invoke-Command): "Parameter set cannot be resolved using the specified named parameters."
Invoke-Command : Parameter set cannot be resolved using the specified named parameters.
At line:1 char:1
+ invoke-command {c:\temp\loggen.ps1} -AsJob
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-Command], ParameterBindingException
    + FullyQualifiedErrorId : AmbiguousParameterSet,Microsoft.PowerShell.Commands.InvokeCommandCommand


              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4382                              0 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           4382                              1 {System.Management.Automati...



PS C:\Users\Administrator\Documents\gitrepos\awscourse> invoke-command -computername . {c:\temp\loggen.ps1} -AsJob

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
2      Job2            RemoteJob       Running       True            localhost            c:\temp\loggen.ps1



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                              0                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              3 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             12                              8 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                             49                              0 {System.Management.Automati...



PS C:\Users\Administrator\Documents\gitrepos\awscourse> get-content C:\temp\timestamp.log | select -last 5
2015-07-07T13:16:52
2015-07-07T13:16:53
2015-07-07T13:16:54
2015-07-07T13:16:55
2015-07-07T13:16:56

PS C:\Users\Administrator\Documents\gitrepos\awscourse> get-content C:\temp\timestamp.log | select -last 5
2015-07-07T13:16:55
2015-07-07T13:16:56
2015-07-07T13:16:57
2015-07-07T13:16:58
2015-07-07T13:16:59

PS C:\Users\Administrator\Documents\gitrepos\awscourse> cd \temp

PS C:\temp> aws s3 mv timestamp.log "s3://dicconlab3w/logfiles/timestamp-$(Get-Date -Format 'M-d-yyyy-h:m:s')"
move: .\timestamp.log to s3://dicconlab3w/logfiles/timestamp-7-7-2015-1:18:11

PS C:\temp> get-content C:\temp\timestamp.log | select -last 5
2015-07-07T13:18:18
2015-07-07T13:18:19
2015-07-07T13:18:20
2015-07-07T13:18:22
2015-07-07T13:18:23

PS C:\temp> get-content C:\temp\timestamp.log
2015-07-07T13:18:12
2015-07-07T13:18:13
2015-07-07T13:18:14
2015-07-07T13:18:15
2015-07-07T13:18:16
2015-07-07T13:18:17
2015-07-07T13:18:18
2015-07-07T13:18:19
2015-07-07T13:18:20
2015-07-07T13:18:22
2015-07-07T13:18:23
2015-07-07T13:18:24
2015-07-07T13:18:25
2015-07-07T13:18:26
2015-07-07T13:18:27
2015-07-07T13:18:28
2015-07-07T13:18:29
2015-07-07T13:18:30

PS C:\temp> aws s3 mv timestamp.log "s3://dicconlab3w/logfiles/timestamp-$(Get-Date -Format 'M-d-yyyy-h:m:s')"
move: .\timestamp.log to s3://dicconlab3w/logfiles/timestamp-7-7-2015-1:18:39

PS C:\temp> get-content C:\temp\timestamp.log
2015-07-07T13:18:41
2015-07-07T13:18:42
2015-07-07T13:18:43

PS C:\temp> aws s3 ls s3://dicconlab3w
                           PRE logfiles/

PS C:\temp> aws s3 ls s3://dicconlab3w/logfiles/
2015-07-07 13:18:13       3738 timestamp-7-7-2015-1:18:11
2015-07-07 13:18:41        567 timestamp-7-7-2015-1:18:39

PS C:\temp> aws s3 mv s3://dicconlab3w/logfiles/timestamp-7-7-2015-1:18:11 s3://dicconlab3w/logfiles/archive/timestamp-7-7-2015-1:18:11
move: s3://dicconlab3w/logfiles/timestamp-7-7-2015-1:18:11 to s3://dicconlab3w/logfiles/archive/timestamp-7-7-2015-1:18:11

PS C:\temp> aws s3 ls s3://dicconlab3w/logfiles/
                           PRE archive/
2015-07-07 13:18:41        567 timestamp-7-7-2015-1:18:39

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5163                             34 {}



PS C:\temp> aws s3 ls s3://dicconlab3w/logfiles/archive/
2015-07-07 13:19:49       3738 timestamp-7-7-2015-1:18:11

              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5201                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5213                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5213                              2 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5213                              4 {System.Management.Automati...



              CurrentMatchIndex               ReplacementIndex              ReplacementLength CompletionMatches
              -----------------               ----------------              ----------------- -----------------
                             -1                           5213                              6 {System.Management.Automati...



PS C:\temp> get-job * | Stop-Job

PS C:\temp> get-content C:\temp\timestamp.log | select -last 5
2015-07-07T13:20:36
2015-07-07T13:20:37
2015-07-07T13:20:38
2015-07-07T13:20:39
2015-07-07T13:20:40

PS C:\temp> get-content C:\temp\timestamp.log | select -last 5
2015-07-07T13:20:36
2015-07-07T13:20:37
2015-07-07T13:20:38
2015-07-07T13:20:39
2015-07-07T13:20:40

PS C:\temp> aws s3 mv timestamp.log "s3://dicconlab3w/logfiles/timestamp-$(Get-Date -Format 'M-d-yyyy-h:m:s')"
move: .\timestamp.log to s3://dicconlab3w/logfiles/timestamp-7-7-2015-1:20:56

PS C:\temp> get-content C:\temp\timestamp.log | select -last 5
get-content : Cannot find path 'C:\temp\timestamp.log' because it does not exist.
At line:1 char:1
+ get-content C:\temp\timestamp.log | select -last 5
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\temp\timestamp.log:String) [Get-Content], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand

